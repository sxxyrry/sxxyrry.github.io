import{_ as R,r as g,c as x,a as l,j as V,i as A,v as L,o as y}from"./index-Cu62ef53.js";const N=["href"],j={__name:"index",setup(E){const c=g(null),s=g(null),d=g(10),b=g(null),I=()=>{c.value.click()},w=async o=>{if(d.value%1!==0){await k("像素大小必须为整数");return}const e=o.target.files[0];if(!e)return;const a=new FileReader;a.onload=r=>{const t=new Image;t.onload=()=>{const n=s.value.getContext("2d");s.value.width=t.width,s.value.height=t.height,n.drawImage(t,0,0),D(n,t.width,t.height,d.value),b.value=s.value.toDataURL("image/png")},t.src=r.target.result},a.readAsDataURL(e)},k=o=>new Promise(e=>{alert(o),e()}),D=(o,e,a,r)=>{const t=o.getImageData(0,0,e,a),n=t.data;for(let u=0;u<a;u+=r)for(let i=0;i<e;i+=r){const p=(u*e+i)*4,C=n[p],U=n[p+1],B=n[p+2],F=n[p+3];for(let f=0;f<r;f++)for(let v=0;v<r;v++)if(u+f<a&&i+v<e){const m=((u+f)*e+(i+v))*4;n[m]=C,n[m+1]=U,n[m+2]=B,n[m+3]=F}}o.putImageData(t,0,0)};return(o,e)=>(y(),x("div",null,[e[1]||(e[1]=l("h1",null,"图片转像素画",-1)),l("button",{onClick:I},"选择文件"),l("input",{type:"file",ref_key:"fileInput",ref:c,accept:"image/*",style:{display:"none"},onChange:w},null,544),e[2]||(e[2]=l("br",null,null,-1)),e[3]||(e[3]=l("br",null,null,-1)),e[4]||(e[4]=l("label",{for:"pixelSizeInput"},"像素大小",-1)),V(l("input",{type:"number",id:"pixelSizeInput","onUpdate:modelValue":e[0]||(e[0]=a=>d.value=a),min:"1"},null,512),[[L,d.value,void 0,{number:!0}]]),e[5]||(e[5]=l("br",null,null,-1)),e[6]||(e[6]=l("br",null,null,-1)),l("canvas",{ref_key:"canvas",ref:s},null,512),e[7]||(e[7]=l("br",null,null,-1)),e[8]||(e[8]=l("br",null,null,-1)),b.value?(y(),x("a",{key:0,href:b.value,download:"pixel_art.png",class:"download-btn"}," 下载像素画 ",8,N)):A("",!0)]))}},P=R(j,[["__scopeId","data-v-5da7bb6f"]]);export{P as default};
