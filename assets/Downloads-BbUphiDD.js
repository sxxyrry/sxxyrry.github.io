import{d as p,r as u,h as C,u as g,c as i,a as t,i as S,b,t as d,w as k,g as w,o as m}from"./index-Cu62ef53.js";import{F as v}from"./Files-Bkfg56Zz.js";const h=p({__name:"Downloads",setup(y){const c=g(),e=u(""),a=u("准备下载..."),n=u(!1);function r(){if(!(!e.value||!v.includes(e.value)))try{const o=document.createElement("a");o.href=`/Files/${e.value}`,o.download=e.value,o.click(),a.value=`已开始下载 ${e.value}`,n.value=!1}catch{a.value="下载失败",n.value=!0}}function s(){a.value="文件不存在，无法下载。",n.value=!1}return C(()=>{try{e.value=decodeURIComponent(atob(c.query.RmlsZU5hbWU)),document.title=`Sigma Cloud Storage 西格玛网盘 - 下载文件 - "${e.value}"`,!e.value||!v.includes(e.value)?s():r()}catch{s()}}),(o,l)=>{const f=w("router-link");return m(),i("div",null,[l[1]||(l[1]=t("h1",null,"Sigma Cloud Storage 西格玛网盘",-1)),t("h2",null,"文件下载 - "+d(e.value||"无"),1),t("h3",null,d(a.value),1),n.value?(m(),i("button",{key:0,onClick:r},"下载失败点击重试")):S("",!0),l[2]||(l[2]=t("br",null,null,-1)),l[3]||(l[3]=t("br",null,null,-1)),b(f,{to:"/SigmaCloudStorage/"},{default:k(()=>l[0]||(l[0]=[t("button",null,"返回",-1)])),_:1,__:[0]})])}}});export{h as default};
