import{d as S,r as n,f as g,s as p,c as i,a as o,v as C,b,t as d,w as k,q as w,o as m}from"./ElseDependent-CmseuSFi.js";import"./index-Cf4UxacX.js";import{F as v}from"./Files-DFUAva-R.js";const N=S({__name:"Downloads",setup(y){const c=p(),e=n(""),a=n("准备下载..."),u=n(!1);document.title="Sigma Cloud Storage 西格玛网盘 - 下载文件";function r(){if(!(!e.value||!v.includes(e.value)))try{const l=document.createElement("a");l.href=`/Files/${e.value}`,l.download=e.value,l.click(),a.value=`已开始下载 ${e.value}`,u.value=!1,document.title=`Sigma Cloud Storage 西格玛网盘 - 下载文件 - 成功 - ${e.value}`}catch{a.value="下载失败",u.value=!0,document.title="Sigma Cloud Storage 西格玛网盘 - 下载文件 - 失败 - 下载失败"}}function s(){a.value="文件不存在，无法下载。",u.value=!1,document.title="Sigma Cloud Storage 西格玛网盘 - 下载文件 - 失败 - 文件不存在"}return g(()=>{try{e.value=decodeURIComponent(atob(c.query.RmlsZU5hbWU)),document.title=`Sigma Cloud Storage 西格玛网盘 - 下载文件 - "${e.value}"`,!e.value||!v.includes(e.value)?s():r()}catch{s()}}),(l,t)=>{const f=w("router-link");return m(),i("div",null,[t[1]||(t[1]=o("h1",null,"Sigma Cloud Storage 西格玛网盘",-1)),o("h2",null,"文件下载 - "+d(e.value||"无"),1),o("h3",null,d(a.value),1),u.value?(m(),i("button",{key:0,onClick:r},"下载失败点击重试")):C("",!0),t[2]||(t[2]=o("br",null,null,-1)),t[3]||(t[3]=o("br",null,null,-1)),b(f,{to:"/SigmaCloudStorage/"},{default:k(()=>t[0]||(t[0]=[o("button",null,"返回",-1)])),_:1,__:[0]})])}}});export{N as default};
